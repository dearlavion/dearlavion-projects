- name: 🔧 Generate .env from template
  template:
    src: ../templates/env.j2    # relative to the playbook file
    dest: "{{ env_file }}"
    mode: '0644'
  tags: start

- name: 🔁 Rebuild Docker containers
  shell: docker-compose down && docker-compose build
  #shell: docker-compose down && docker-compose up -d --build
  args:
    chdir: "{{ project_path }}"
  tags: start

- name: Stop Docker containers
  shell: docker-compose down
  args:
    chdir: "{{ project_path }}"
  tags: stop
